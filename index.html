<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>DLS管理面板</title>
<style>
body{
    display:flex;
}
</style>
<link rel="stylesheet" type="text/css" href="basicWidgets.css">
<link rel="stylesheet" type="text/css" href="dasher.css">
<link rel="stylesheet" type="text/css" href="console.css">
<link rel="stylesheet" type="text/css" href="shortcuts.css">
<link rel="stylesheet" type="text/css" href="settings.css">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="lib/cookie.js"></script>
<script src="panel.js"></script>
<script>
//网页加载完毕才加载的部分
$(function(){
//如果本地没有存储服务器登录数据则跳转至login.html要求用户登录
if(!(parseCookie("host").length&&parseCookie("token"))){
    indextologin()
}

//加载网页时立即从服务器获取进程状态
get_server_status((status)=>{
	switch_button_color(document.getElementById('power'),Number(status));
})

//开始循环请求服务器硬件使用情况
var hardwareStatus={}
setInterval(()=>{
getHardwareStatus((response)=>{
	document.getElementById("cpuchart").contentWindow.updateCPUStatus(response.cpu_rate)
})
},1100)

//初始化用户配置
initConf()

})
</script>
</head>
<body>

	<div class="settings_form" id="settings_form">
		<div class="settings_form_container" id="settings_form_container">
			<button class="round_button" id="close_settings_form" onclick="hide_settings_form()">
				<img src="maps/close.png" class="round_button_image">
			</button><br>
			<button class="round_button" id="logout" onclick="logout()">
				<img src="maps/logout.png" class="round_button_image">
			</button><br>			
		</div>
	</div>
	<div class="panel">
		
		<div class="console_controller">
			
			<iframe src="serverconsole.html" class="console_output" frameborder="0"></iframe>
		</div>
		
		<div class="panel_right">
			<div class="dasher">
				<div class="charts">
					<div class="cpu_chart">
						<iframe src="cpuchart.html" id="cpuchart" style="width:100%;height:100%" frameborder="0"></iframe>
					</div>
				</div>
				<div class="disk">
					<div class="mem_bottom"></div>
				</div>
				<button class="disk">
				</button>
			</div>
			<div class="shortcuts">
				<div class="param_shortcuts">
					<div class="param_shortcut1">

					</div>
					<div class="param_shortcut2">

					</div>
				</div>
				<div class="simple_shortcuts">
					<button class="simple_shortcut1"></button>
					<button class="simple_shortcut2"></button>
					<button class="simple_shortcut3"></button>
					<button class="simple_shortcut_menu"></button>					
				</div>
			</div>		
		</div>		
	</div>


	<div class="power_buttons_container">
		<button class="round_button" id="power">
			<img src="maps/power.png" class="round_button_image" onclick="_switch()">
		</button><br>
		<button class="round_button">
			<img src="maps/reset.png" class="round_button_image" onclick="executeRestart()">
		</button><br>
		<button class="round_button" id="backup">
			<img src="maps/backup.png" class="round_button_image" onclick="executeBak()">
		</button><br>
		<button class="round_button" id="settings">
			<img src="maps/settings.png" class="round_button_image" onclick="show_settings_form()">
		</button><br>
		</button><br>
	</div>
	<div class="option_container">
		<button class="round_button" id="option">
			<img src="maps/option.png" class="round_button_image"></button><br>
		</button>
	</div>
	
</body>