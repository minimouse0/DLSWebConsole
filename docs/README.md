# DLSWebConsole使用说明
> [!NOTE]
> 开始使用前，请详细阅读此说明书。
# 开始使用

## 适用范围

DLS网页控制台至少需要您的浏览器或服务器满足以下条件：
1. DLS目前不支持https，请不要用支持https访问的网站托管网页控制台，例如不要使用github pages，这会导致与DLS本体的通信被视为不安全并被阻止。
2. 要从公网使用网页控制台，需要DLS的API开放到公网，需要占用单独的一个端口。因此如果你的服务器并不能直接获取公网IP（不是独立IP），你需要确保你的服务器可再创建一条TCP协议的内网穿透/端口映射。
3. DLS的API为http协议，如果你的运营商会拦截任何从公网访问http协议的通信，DLS的API会难以在公网访问。

## 配置DLS

前往DLS本体的[wiki](https://gitee.com/dlcn/dlscq/wikis/API%E6%9C%8D%E5%8A%A1?sort_id=9353907)阅读本体的配置教程。

> [!INFO]
> 请确保你使用http协议而不是https协议访问网页控制台。如果正通过https协议访问网站，请尝试取消该网站的https协议支持，确保其只能使用http协议访问。

## 登录

初次登录，控制台将要求输入服务器的API地址和token。

### API地址

这是你的DLS API开放到公网时的访问地址。如果服务器网卡能够直接获取公网IP（独立IP），访问地址为你服务器的IP/域名+端口（如 http://231.hk.cn:16263 ）。如果使用了内网穿透，请使用内网穿透的公网访问地址，例如通过内网穿透将本地端口映射到穿透节点的58202，应该填写 http://frp-example.net:58202 。如果采用端口映射，例如将本地端口映射到公网IP的58202，应该填写例如http://231.hk.cn:58202 。

> [!WARNING]
> 目前填写API地址必须带 `http://` 协议前缀，否则将无法正常连接控制台

### token

请前往DLS本体的 配置.json 编辑和查看“服务token”。设置token时请设置的尽可能复杂而又长，DLS不内含任何防暴破机制，相对简单的密码极容易被暴破攻击破解。黑客一旦访问到你的程序控制台，将可能对你的服务器甚至你的人身安全造成极大的安全威胁。

全部填写完毕后，点击登录，随后网站将跳转至控制台。

如果填写正确，此时网页内的服务器各项指标都会显示出来。如果填写不正确，控制台将显示不出任何信息。遇到这种情况，请点击浏览器的后退键返回登录页面，重试填写API地址和token。

## 阅读服务器日志

网页控制台左侧的一栏黑底白字的界面即为服务器最近的日志。刚刚进入控制台时，最多显示过去50条日志。随后服务器再出现新日志时，此日志界面将立即滚动至底部显示该最新日志。

如果不希望阅读日志时新日志将网页强制拉到底部，可以点击左上角的箭头使其变为蓝灰色，即可禁用自动滚动。随后如果想再次开启自动滚动，可以再次点击该箭头使其变为蓝色来启用。

## 执行DLS内置命令

> [!WARNING]
> 网页控制台向DLS发送的都是DLS内置命令，不是控制台命令！例如如果要在服务器里执行`/list`指令，应该执行`cmd list`而不是直接执行`list`

DLS内置命令与机器人命令/机器人正则中可用的内置命令完全相同。对于完整的内置命令列表，可阅读[内置命令参考](https://gitee.com/dlcn/dlscq/wikis/%E9%85%8D%E7%BD%AE%E8%A7%A3%E9%87%8A(%E9%80%89%E8%AF%BB)/%E5%86%85%E7%BD%AE%E5%91%BD%E4%BB%A4%E5%8F%82%E8%80%83)。

例如：
- 备份服务器数据：`startBak`
- 执行list命令查看在线人数：`list`
- 查询基岩版服务器motd：`motdpe`
- 重启服务器：`restart`
- 控制机器人帐号向群内发消息：`group 你要说的话`
- 重载配置：`dlsload`

## 开关服务器

服务器开启时，右上角电源按钮为蓝色，关闭时为蓝灰色。点击该按钮即可切换服务器开关状态。点击后按钮状态不会马上变化，这是因为DLS需要一定的时间来开启或关闭服务器进程。

点击右上角的箭头按钮可以直接重启服务器。

点击备份按钮可以直接执行startBak命令备份服务器。

## 查看最近的CPU占用

控制台右上角的图表为根据最近服务器CPU总体占用率绘制的折线统计图。

## 查看服务器内存/硬盘占用

右侧的两个进度条中，第一行为内存占用，以MB为单位；第二行为硬盘占用，以GB为单位。

如果服务器有多个硬盘分区，点击第二行的进度条可以切换显示每个分区的占用情况。

## 设置面板

点击右上角的齿轮可以打开设置面板。

### 定制快捷按钮

网页控制台支持三个快捷按钮。点击对应的按钮即可编辑它的名称和执行的内置命令。

通常情况下，如果需要配置一个按钮点击后执行`cmd list`命令，需要在第一行输入它的名称：“查看在线人数”，第二行输入它执行的命令：`cmd list`。输入完成后，点击左下角对号保存。如果要舍弃此更改，点击左上角的叉。

### 退出登录

点击左下角的退出键可退出登录。随后网页控制台回退到登录页面，此时需重新输入API地址和token。

### 关闭设置页面

点击左上角的叉关闭设置页面。

## 说明书

点击问号打开此说明书。